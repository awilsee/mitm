[default](+)
exten => 000001,	1,Set(CDR(hangupdirection)=A)
same =>			n,Answer()
same =>			n,GotoIf($["${CDR(A-IMSI)}"!="IMSI010100000000006"]?BUSY)
same =>			n,Playback(/home/all/gsmCalls/recordedCall1.gsm_mixed)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

same =>			n(BUSY,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Busy(5)

exten => 000002,	1,Set(CDR(hangupdirection)=A)
same =>			n,Answer()
same =>			n,GotoIf($["${CDR(A-IMSI)}"!="IMSI010100000000006"]?BUSY)
same =>			n,Playback(/home/all/gsmCalls/recordedCall2.gsm_mixed)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

same =>			n(BUSY,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Busy(5)

exten => 000003,	1,Set(CDR(hangupdirection)=A)
same =>			n,Answer()
same =>			n,GotoIf($["${CDR(A-IMSI)}"!="IMSI010100000000006"]?BUSY)
same =>			n,Playback(/home/all/gsmCalls/recordedCall3.gsm_mixed)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

same =>			n(BUSY,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Busy(5)

exten => 000004,	1,Set(CDR(hangupdirection)=A)
same =>			n,Answer()
same =>			n,GotoIf($["${CDR(A-IMSI)}"!="IMSI010100000000006"]?BUSY)
same =>			n,Playback(/home/all/gsmCalls/recordedCall4.gsm_mixed)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

same =>			n(BUSY,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Busy(5)

exten => 000005,	1,Set(CDR(hangupdirection)=A)
same =>			n,Answer()
same =>			n,GotoIf($["${CDR(A-IMSI)}"!="IMSI010100000000006"]?BUSY)
same =>			n,Playback(/home/all/gsmCalls/recordedCall5.gsm_mixed)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

same =>			n(BUSY,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Busy(5)

exten => 2101,		1,Set(CDR(hangupdirection)=A)				;2101 extension is used for factory testing with zoiper
same =>			n,Dial(SIP/zoiper,180,g)
same =>			n,Set(CDR(hangupdirection)=${IF($["${DIALSTATUS}"="ANSWER"]?B:SYSTEM)})
same =>			n,Goto(h-${HANGUPCAUSE},1)

exten => 1111,		1,Set(CDR(hangupdirection)=A)				;1111 Record voice file to /tmp directory
same =>			n,Answer(${AnswerDelay})				;Call 1111 to Record new Sound Files
same =>			n,Playback(beep)					;play a beep sount to indicat that recording has startet
same =>			n,Record(/tmp/asterisk-recording:gsm)			;Press # to stop recording
same =>			n,Wait(2)
same =>			n,Playback(/tmp/asterisk-recording)			;Listen to your voice
same =>			n,wait(2)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2600,		1,Set(CDR(hangupdirection)=A)				;2600 for evaluating echo latency.
same =>			n,Answer() 
same =>			n,Echo()
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2601,		1,Set(CDR(hangupdirection)=A)				;2601 is for testing prompts
same =>			n,Answer(${AnswerDelay})				;allow the channel to be establis
same =>			n,Playback(followme/sorry)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2602,		1,Set(CDR(hangupdirection)=A)				;2602 testtone
same =>			n,Answer()
same =>			n,Milliwatt()
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2603,		1,Set(CDR(hangupdirection)=A)				;2603 IP address of the PBX
same =>			n,Answer(${AnswerDelay})
same =>			n,Set(Lines=${SHELL(ifconfig | grep 'inet addr:'| grep -v '127.0.0.1'|wc -l)})
same =>			n,Set(n=1)
same =>			n,While($[${n} <= 0${Lines}])
same =>			n,Set(IP=${SHELL(ifconfig | grep 'inet addr:'| grep -v '127.0.0.1' | cut -d: -f2 | awk '{ print $1}'|sed -ne ${n},${n}p)})
same =>			n,SayNumber(${CUT(IP,.,1)})
same =>			n,Playback(letters/dot)
same =>			n,SayNumber(${CUT(IP,.,2)})
same =>			n,Playback(letters/dot)
same =>			n,SayNumber(${CUT(IP,.,3)})
same =>			n,Playback(letters/dot)
same =>			n,SayNumber(${CUT(IP,.,4)})
same =>			n,Set(n=$[${n} + 1])
same =>			n,ExecIf($[${n} <= 0${Lines}]?Playback(vm-and))
same =>			n,EndWhile()
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2604,		1,Set(CDR(hangupdirection)=A)				;2604 say IMSI
same =>			n,Answer(${AnswerDelay})
same =>			n,SayDigits(${CDR(A-IMSI)})
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2605,		1,Set(CDR(hangupdirection)=A)				;Answer Test
same =>			n,Answer()
same =>			n,MusicOnHold()
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2606,		1,Set(CDR(hangupdirection)=A)				;Early Media Test
same =>			n,Progress()
same =>			n,MusicOnHold()
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2607,		1,Set(CDR(hangupdirection)=A)				;Out Of Band Ringing test
same =>			n,Ringing()
same =>			n,Wait(60)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2608,		1,Set(CDR(hangupdirection)=A)				;In Band Ringing test
same =>			n,Answer()
same =>			n,Ringing()
same =>			n,Wait(60)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2609,		1,Set(CDR(hangupdirection)=A)				;Ringing then Progress
same =>			n,Ringing()
same =>			n,Wait(10)
same =>			n,Progress()
same =>			n,MusicOnHold()
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2610,		1,Set(CDR(hangupdirection)=A)				;Progress then Ringing
same =>			n,Progress()
same =>			n,MusicOnHold(,10)
same =>			n,Ringing()
same =>			n,Wait(10)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2611,		1,Set(CDR(hangupdirection)=A)				;100 Trying
same =>			n,Wait(60)
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 2612,		1,Set(CDR(hangupdirection)=A)				;DTMF Test
same =>			n,Goto(DTMFtest,s,1)

exten => 2613,		1,Set(CDR(hangupdirection)=A)				;chans stats
same =>			n,Goto(ChansStatus,s,1)

exten => _[*#+0-9],	1,Set(CDR(hangupdirection)=A)				;Single digit test
same =>			n,Answer(${AnswerDelay})
same =>			n,SayAlpha(${EXTEN})
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => 12345678901234567890,	1,Set(CDR(hangupdirection)=A)			;20 digit test
same =>			n,Answer(${AnswerDelay})
same =>			n,SayDigits(${EXTEN})
same =>			n,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)


[ChansStatus]
exten => s,		1,Answer(${AnswerDelay})
same =>			n,Set(TIMEOUT(digit)=2)
same =>			n(Speak),Background(ChansStatus)
same =>			n,WaitExten(30)
same =>			n,Goto(2,1)						;just jump to RSSI

exten => 1,		1(UPFER),SayNumber(${SHELL(echo chans|sudo /OpenBTS/OpenBTSDo|grep ${CDR(A-IMSI):4}|cut -b 27-|awk '{print $3}')})
same =>			n,WaitExten(2)
same =>			n,Goto(UPFER)

exten => 2,		1(RSSI),SayNumber(${SHELL(echo chans|sudo /OpenBTS/OpenBTSDo|grep ${CDR(A-IMSI):4}|cut -b 27-|awk '{print $4}'|sed 's/[^0-9]//g')})
same =>			n,WaitExten(2)
same =>			n,Goto(RSSI)

exten => 3,		1(TXPWR),SayNumber(${SHELL(echo chans|sudo /OpenBTS/OpenBTSDo|grep ${CDR(A-IMSI):4}|cut -b 27-|awk '{print $5}'|sed 's/[^0-9]//g')})
same =>			n,WaitExten(2)
same =>			n,Goto(TXPWR)

exten => 4,		1(TXTA),SayNumber(${SHELL(echo chans|sudo /OpenBTS/OpenBTSDo|grep ${CDR(A-IMSI):4}|cut -b 27-|awk '{print $6}'|sed 's/[^0-9]//g')})
same =>			n,WaitExten(2)
same =>			n,Goto(TXTA)

exten => 5,		1(DNLEV),SayNumber(${SHELL(echo chans|sudo /OpenBTS/OpenBTSDo|grep ${CDR(A-IMSI):4}|cut -b 27-|awk '{print $7}'|sed 's/[^0-9]//g')})
same =>			n,WaitExten(2)
same =>			n,Goto(DNLEV)

exten => 6,		1(DNBER),SayNumber(${SHELL(echo chans|sudo /OpenBTS/OpenBTSDo|grep ${CDR(A-IMSI):4}|cut -b 27-|awk '{print $8}')})
same =>			n,WaitExten(2)
same =>			n,Goto(DNBER)


[DTMFtest]
exten => s,		1,Answer(${AnswerDelay})
same =>			n,Set(TIMEOUT(digit)=5)
same =>			n(Speak),Background(DTMFtest)
same =>			n,WaitExten(10)

exten => _[+*#0-9]!,	1,SayDigits(${EXTEN})
same =>			n,WaitExten(10)

exten => t,		1,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)

exten => i,		1,Set(CDR(hangupdirection)=SYSTEM)
same =>			n,Hangup(16)
